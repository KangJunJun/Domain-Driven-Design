# 1. 도메인 모델 시작하기

→ 도메인 모델은 객체지향 프로그래밍 이다.

저는 객체지향이란 말 안에 설계의 영역도 포함되어 있다고 생각하는데,

그런 차원에서 객체지향은 객체에 집중해서 어떤 **역할**과 **책임**을 부여할 것인지, 그리고 누구와 **협력**할 것인지 정의하는 모든 과정이라고 생각합니다.

---

## 1.1 도메인

도메인(Domain ; (지식, 활동의)영역, 분야, (책임의) 범위)

- 개발자에게 있어서 도메인이란, 소프트웨어로 해결하고자 하는 **문제 영역**

---

## 1.2 도메인 전문가와 개발자 간 지식공유

- 경험 : 저는 SI 업체 경험밖에 없어서 오히려 이 챕터에서 공감이 많이 갔습니다.
- 삼성전자 반도체 패키징 쪽에서 생산량 시뮬레이션 시스템을 운영했었는데,
- 항상 현업 담당자와 직접 커뮤니케이션 하면서 요구사항을 정제하는 일을 줄곧 해왔어요
- 그래서 도메인 전문가와 개발자 간 지식 공유가 얼마나 중요한 지 알 수 있었죠
    - `특정 모듈 제품의 6월 demand가 12k인데, M102 step 에서 BoR이 6k라 마스터 챔버가 2대 모자라요.`
    - `왜 p8 part가 12월에 su site로 할당 되었나요?`
    - 그렇다면, 저는 이런 용어들을 다 알고 있어야 하고,  
      반대로 이런 전문적인 도메인의 비즈니스 로직이 어떤 경우엔 시스템 적으로 해결할 수 없는 경우가 있는데,  
      그때는 왜 안되는지 충분히 설명해야 했습니다.
- 저는 이런 경험이 객체지향을 실무에서는 완벽하게 도입하기가 어렵다는 결론을 냈습니다 ^^
- 근데 DDD 란 개념을 접하면서 제가 겪었던 객체지향을 실무에 적용하는데 실패하는 가장 큰 괴리  
  (도메인 전문가와 개발자 간 간극)에 대한 해결방법을 직접적으로 제시하고 있어서 너무 반가웠습니다.

--- 

## 1.3 도메인 모델

도메인 모델 : 도메인을 개념적으로 표현한 것 —> 모델링의 관점에선 모든 것이 도메인 모델이 될 수 있다라는 것이 인상깊었습니다잉

- UML 의 많은 다이어그램
    - 클래스 다이어그램(객체를 이용한 도메인 모델)
    - 상태 다이어그램 상태 전이 모델링
- 수학 공식 기반 도메인 모델
- 그래프

--- 

## 1.4 도메인 모델 패턴

- 도메인에 비즈니스 로직을 동반한 핵심 규칙을 집중구현
- 어떤 객체가 어떤 역할과 책임을 가질지, 중요한건 도메인 컴포넌트가 비즈니스를 가진다는 것

--- 

## 1.5 도메인 모델 도출 ; 요구사항, 기능목록

- 도메인에 대한 이해 없이는 코딩을 시작할 수 없다.
- 어떤 도구를 이용하던, 구현을 시작하려면 도메인에 대한 초기 모델이 필요하다.
- 도메인을 모델링할 때 기본이 되는 작업은 모델을 구성하는 **핵심 구성요소**, **규칙**, **기능**을 찾는 것
    - 이 모든 과정은 **_요구사항_** 에서 출발한다.
    - 우테캠에서 강조했던 **_기능목록을 먼저 작성하기_**

> 주문 도메인의 주요 요구사항
> - 최소 한 종류 이상의 상품을 주문해야 한다.
> - 한 상품을 한 개 이상 주문할 수 있다.
> - 총 주문 금액은 각 상품 가격에 구매 개수를 곱한 값이다
> - 주문할 때 배송지 정보를 반드시 지정해야 한다
> - 배송지 정보는 받는 사람 이름, 전화번호, 주소로 구성된다.
> - 출고를 하면 배송지를 변경할 수 없다.
> - 출고 전에 주문을 취소할 수 있다.
> - 고객이 결제를 완료하기 전에는 상품을 준비하지 않는다.

---

## 1.6 엔티티와 밸류

- Money 의 의미로 쓰이는 객체를 int 형으로 쓰지 말라
    - 컴퓨터 공학적으로는 자료구조란 `타입과 함수` 이라고 배웠다.
    - 이런 차원에서 밸류는 일종의 자료구조에 가깝다(Money에 대하여, parseInt() 연산이 가능한가? - 불가능)
- 이 부분도 객체지향 생활체조원칙 중 원시값과 문자열을 포장한다는 개념에서 객체지향이다 라는 생각이 들더군요
- DTO와 VO
    - DTO는 밸류인가요? —> (개인적 생각) setter가 없어도 되는 불변의 DTO는 밸류이기에 충분하다.

### 1.6.1 엔티티

### 1.6.2 엔티티의 식별자 생성

### 1.6.3 밸류 타입

### 1.6.4 엔티티 식별자와 밸류 타입

### 1.6.5 도메인 모델에 set 메서드 넣지 않기

- 불변 객체의 이점

--- 

## 1.7 도메인 용어와 유비쿼터스 언어

- 의미있는 이름을 짓고, 도메인에서 어떤 이름을 지을 지 치열하게 토론해라

### [Status vs State](https://w.cublr.com/programming/different-between-state-status/)

---

### 생각해봅시다..!

1. DDD 경험에 대한 공유..(저는 없어서 여러분들의 경험을 공유받고 싶습니다.)
2. 실무에서 DDD를 적용하고 계시다면, 도메인 전문가는 누구인가요?
    - Maybe 기획자?
    - Maybe 기획자 + 개발자
3. `isShippingChangeable()` 비즈니스 로직의 위치 : `OrderState` vs `Order` 어디가 더 적합할까요?
4. Spring Validation 적용 대상 `DTO만` vs `DTO + Entity`
    - DTO만 : 어차피 Controller 로 들어오는 데이터만 잘 검증하면 된다.
    - DTO vs Entity : 내부적으로 테스트 코드 작성시에도 유효성에 대한 검증이 필요하므로, Entity에도 Validation을 해야 한다.